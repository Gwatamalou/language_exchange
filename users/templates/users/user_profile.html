{% extends 'base.html' %}
{% load static %}

{% block content %}
    <h1 id="title">Профиль</h1>
    <div class="information">


        <form id="avatar-form" method="POST" enctype="multipart/form-data">
            {% csrf_token %}
            <div id="avatar-container" >
            <img id="avatar" src="{{ avatar_url }}" alt="avatar">
            <span id="hover-text">Изменить изображение</span>
            </div>

            <input type="file" id="avatar-input" name="avatar" style="display: none;" accept="image/*">
        </form>

        <dl>
            <dt>ID</dt>
            <dd>{{ user.id }}</dd>
            <dt>Имя</dt>
            <dd>{{ user.username }}</dd>
            <dt><a href="{% url 'password-change' %}"><button>Сменить пароль</button></a></dt>
            <form method="POST" action="{% url 'logout' %}">
                {% csrf_token %}
                <button type="submit">Выйти</button>
            </form>
        </dl>
    </div>

    <div class="add_language_skill">
        <form method="POST">
            {% csrf_token %}
            {{ form.language }}
            {{ form.level_skill }}
            <button name="add_skill">Добавить</button>
        </form>
    </div>

    {% include 'users/include/table_of_user_languages_and_skills.html' %}


    <script>
        document.getElementById("avatar").addEventListener("click", function () {
            document.getElementById("avatar-input").click();
        });

        document.getElementById("avatar-input").addEventListener("change", function () {
            document.getElementById("avatar-form").submit();
        });
    </script>
{% endblock %}